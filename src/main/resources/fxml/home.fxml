<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            styleClass="root-container" prefWidth="1000" prefHeight="750">

    <top>
        <VBox spacing="0">
            <!-- Header Superiore (Logo + Toggle + Utente) -->
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-container">
                <padding>
                    <Insets top="15" right="30" bottom="15" left="30"/>
                </padding>
                
                <Label text="SPORTY" styleClass="title-label">
                    <font>
                        <Font name="System Bold" size="24"/>
                    </font>
                </Label>

                <!-- Container per il Toggle Switch (popolato da Java) -->
                <HBox fx:id="roleSwitchContainer" alignment="CENTER_LEFT" spacing="10">
                    <padding><Insets left="20"/></padding>
                </HBox>

                <Region HBox.hgrow="ALWAYS"/>

                <HBox alignment="CENTER_RIGHT" spacing="15">
                    <VBox alignment="CENTER_RIGHT" spacing="2">
                        <Label fx:id="welcomeLabel" text="Welcome" styleClass="welcome-label"/>
                        <Label fx:id="roleLabel" text="Player" styleClass="role-label"/>
                    </VBox>
                    <Button fx:id="logoutButton" text="Esci" onAction="#handleLogout"
                            styleClass="logout-button"/>
                </HBox>
            </HBox>

            <!-- Hero Section (Barra di Ricerca) -->
            <VBox fx:id="heroContainer" alignment="CENTER" styleClass="hero-section">
                <!-- Il contenitore dei filtri verrÃ  iniettato qui da Java -->
                <VBox fx:id="filterContainer" alignment="CENTER" fillWidth="false" spacing="10">
                    <!-- Populated dynamically -->
                </VBox>
            </VBox>
        </VBox>
    </top>

    <center>
        <ScrollPane fx:id="mainScrollPane" fitToWidth="true" styleClass="custom-scroll" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER">
            <VBox fx:id="mainContentBox" spacing="20" styleClass="content-container">
                <padding>
                    <Insets top="10" right="40" bottom="40" left="40"/>
                </padding>

                <!-- Azioni Organizzatore (Visibile solo se Organizer) -->
                <VBox fx:id="organizerActionsBox" spacing="15" styleClass="actions-container" visible="false" managed="false">
                    <Label text="Gestione Rapida" styleClass="section-title"/>
                    <HBox spacing="15">
                        <Button fx:id="organizeMatchButton" text="+ Crea Partita"
                                onAction="#handleOrganizeMatch" styleClass="primary-action-button"
                                prefWidth="200" prefHeight="50"/>
                        <Button fx:id="bookFieldButton" text="Prenota Campo"
                                onAction="#handleBookField" styleClass="secondary-action-button"
                                prefWidth="200" prefHeight="50"/>
                    </HBox>
                </VBox>

                <!-- Sezione Partite -->
                <VBox spacing="20">
                    <HBox alignment="CENTER_LEFT">
                        <Label fx:id="matchesTitle" text="Esplora partite" styleClass="section-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="refreshButton" text="Aggiorna" onAction="#handleRefresh"
                                styleClass="text-button"/>
                    </HBox>

                    <!-- GRID VIEW (FlowPane) -->
                    <FlowPane fx:id="matchesContainer" styleClass="matches-grid" 
                              hgap="25" vgap="25" prefWrapLength="900" 
                              alignment="TOP_LEFT">
                        <!-- Le Match Cards verticali vengono aggiunte qui -->
                    </FlowPane>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>

    <bottom>
        <HBox alignment="CENTER_RIGHT" styleClass="footer-container">
            <padding>
                <Insets top="5" right="20" bottom="5" left="20"/>
            </padding>
            <Label fx:id="statusLabel" text="Pronto" styleClass="status-label"/>
        </HBox>
    </bottom>
</BorderPane>